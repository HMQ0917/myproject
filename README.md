# myproject
小组成员：胡梦琪 202000460126
Git账户：HMQ0917
完成项目：
SM4加速；
SM3优化；
SM2签名；
Merkle Tree实现；
关于MPT的研究报告；
关于ESDSA在以太坊中的应用报告；

未完成项目：
SM3生日攻击
Rho方法攻击SM3
SM3/SHA256 长度扩展攻击
SM2两方解密
SM2实现PGP协议
泛化哈希链实现
ECMH实现；
在比特币测试网上发送一个tx并解析其每个比特
伪造中本聪签名；
谷歌密码验证
在某些k下找到一个64字节的消息满足其哈希值是对称的
写一个curcuit证明你的六级成绩合格（零知识的）
项目说明及运行截图：
SM4加速：
代码说明
利用SM4与AES中S盒结构的相似性，使用AESNI指令完成S盒操作
一次操作128bit数据，则需将SM4的四组消息打包至一块
主要过程为：1.输入明文；2.分组打包；3.32轮轮函数操作（S盒操作使用SIMD完成）；4.将密文分组解包
算法主要包括：轮密钥扩展函数；S盒置换函数；加解密函数，使用了SIMD指令集对其进行加速优化
S盒置换函数的核心指令是AESNI指令集中的_mm_aesenclast_si128指令,利用其完成了SM4的S盒查表操作；
其包括行移位、字节代替（S盒）以及轮密钥加三步。为了消除行移位和轮密钥加的影响，使用逆行移位和全零轮密钥来抵消.
在S盒置换函数中用到了矩阵乘法的优化，利用vpshufb指令可以实现4bit的快速查表运算，可以将矩阵乘法拆分成两个4bit的查表，即，高4bit对应一个 4→8查找表，低4bit对应一个 4→8
查找表。两次查表结果异或就是最终乘法的结果


运行结果
![图片](https://user-images.githubusercontent.com/105527286/180696768-588ddc9f-cf91-4c60-9e6e-9bcd17a60765.png)

SM3优化：
代码说明
使用多线程来达到加速优化目标
流程：
1.消息填充
把数据长度填充至512位的倍数。先填充一个“1”，后面加上k个“0”。其中k是满足(n+1+k) mod 512 = 448的最小正整数,然后追加64位的数据长度
2.消息扩展
先将一个512位数据分组划分为16个消息字，并且作为生成的132个消息字的前16个。再用这16个消息字递推生成剩余的116个消息字。
3.迭代压缩
初值IV被放在A、B、C、D、E、F、G、H八个32位变量中，压缩函数将这八个变量进行64轮相同的计算；
最后，再将计算完成的A、B、C、D、E、F、G、H和原来的A、B、C、D、E、F、G、H分别进行异或，就是压缩函数的输出。这个输出再作为下一次调用压缩函数时的初值。依次类推，直到用完最后一组132个消息字为止。
4.输出结果
将得到的A、B、C、D、E、F、G、H八个变量拼接输出，就是SM3算法的输出。
在消息扩展与分组函数中引入了多线程计算。

运行结果
![图片](https://user-images.githubusercontent.com/105527286/180695710-5d47e5d8-f286-4c5b-b890-1eeeada29f0d.png)

SM2签名：
代码说明
由于SM2算法基于椭圆曲线点的运算，所以先实现类ECC，在其中定义了相关椭圆曲线上点的运算
然后定了义SM2类，其继承类ECC;
在SM2中定义签名以及验证函数
在测试函数中
我们创建两个SM2对象并初始化，A对消息进行签名生成（r,s）,B对（r,s）进行验证，若通过签名验证则返回True并输出密钥
运行结果
![图片](https://user-images.githubusercontent.com/105527286/180698380-066daf15-c751-4d66-bffb-53602588ce6e.png)


Merkle Tree实现：
代码说明
Node类型为节点，在该类中每个节点有左节点，右节点，父节点以及储存的data及其hash值；定义函数改变节点数据；
merkle_tree类型为默克尔树，对于一棵树有其根节点，树高以及叶子节点；
一棵默克尔树，树中每个叶子节点对应一个哈希值。
默克尔树的高度为 h，那么每个默克尔树能够记录 2**h个完整性摘要值；
每更新一个叶子节点，需要更新从叶子节点到根的这一路径上所有节点的哈希值（使用MD5进行哈希）。
类中定义树的创建，增加节点，更新树，树的遍历以及求树中叶子结点节点数目的函数；
测试：创建一棵层高为10的树，并给其增加节点然后遍历树展示结果。


运行结果
![图片](https://user-images.githubusercontent.com/105527286/180698443-c04a38b6-00cf-4ceb-81d1-e397fa29b1d6.png)

关于MPT的研究报告：
在报告中介绍了MPT的基本概念，结构，编码方式以及MPT的相关操作，并对一些基本操作进行了相应的代码实现；
关于ECDSA在以太坊中的应用报告：
在报告中介绍了ECDSA的基本原理，密钥以及相关参数的处理，签名过程，验证签名，以及其在以太坊交易中的应用；




